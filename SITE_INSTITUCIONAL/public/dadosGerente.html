<!DOCTYPE html>

<html lang="pt-BR">

<head>

    <meta charset="UTF-8">

    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="stylesheet" href="./css/cadastroGerente.css">

    <title>Seus dados - Gerente</title>

</head>
<body onload="perfil()">
<div class="content">
    <button class="hamburger" onclick="Navbar()">
        <div class="bar"></div>
        <div class="bar"></div>
        <div class="bar"></div>
    </button>

    <nav id="navMenu" class="nav-menu">
        <button class="close-btn" onclick="Navbar()">
            <div class="bar"></div>
            <div class="bar"></div>
            <div class="bar"></div>
        </button>

        <img src="imagens/SecurePass SVGLogoNavBar.svg" alt="Logo" class="logo">

        <div class="separator"></div>

        <div class="nav-links">
            <a href="./CadTecnicoSuporte.html">Gestão TS</a>
                <a href="./dashGerente.html">Dashboard</a>
                <a href="./dadosGerente.html">Perfil</a>
                <a href="./feedbackGer.html">Feedback</a>
        </div>

        <a href="index.html" class="logout">Sair</a>
    </nav>
</div>

    <div class="mae">
        <div class="espacohamburger"></div>
        <div class="mae_container">
            <div class="container">
                <div class="espacotitulo" style="width: 20%;">
                    <h1>Seus dados</h1>
                </div> <br>
                <div class="espaco_formu">
                    <div class="espaco_inputs">
                        <div class="input-container">
                            <label for="nomeRepresentante"><b>Nome:</b></label>
                            <input type="text" id="nomeRepresentante" value="">
                        </div>
                
                        <div class="input-container">
                            <label for="cpfRepresentante"><b>CPF:</b></label>
                            <input type="text" id="cpfRepresentante" value="">
                        </div>
                
                        <div class="input-container">
                            <label for="emailRepresentante"><b>Email:</b></label>
                            <input type="text" id="emailRepresentante" value="">
                        </div>
                
                        <div class="input-container">
                            <label for="empresaRepresentante"><b>Empresa:</b></label>
                            <input type="text" id="empresaRepresentante" disabled value="">
                        </div>
                
                        <div class="input-container">
                            <label for="cargoRepresentante"><b>Cargo:</b></label>
                            <input type="text" id="cargoRepresentante" value="">
                        </div>
                
                        <div class="input-container">
                            <label for="senhaRepresentante"><b>Senha:</b></label>
                            <input type="password" id="senhaRepresentante" disabled value="">
                        </div>
                
                        <button type="submit" class="save">Salvar alterações</button>
                    </div>
                </div>
                
        </div>
    </div>

    <script>
        function Navbar() {
            const navMenu = document.getElementById('navMenu');
            const hamburger = document.querySelector('.hamburger');
            const closeBtn = document.querySelector('.close-btn');

            if (navMenu.classList.contains('show')) {
                navMenu.classList.remove('show');
                setTimeout(() => {
                    hamburger.style.display = 'block';
                    closeBtn.style.display = 'none';
                }, 300);
            } else {
                hamburger.style.display = 'none';
                closeBtn.style.display = 'block';
                navMenu.classList.add('show');
            }
        }

        function perfil() {
            var idUsuario = sessionStorage.getItem("ID_USUARIO");

            fetch("/avisos/dadosPerfil", {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify({ idUsuarioServer: idUsuario }),
            })
            .then((resposta) => {
                if (resposta.ok) {
                    return resposta.json();
                } else {
                    throw "Houve um erro ao tentar realizar o cadastro!";
                }
            })
            .then((dados) => {
                if (dados.length > 0) {
                    var usuario = dados[0];

                    document.getElementById("nomeRepresentante").value = usuario.nome;
                    document.getElementById("senhaRepresentante").value = usuario.senha;
                    document.getElementById("empresaRepresentante").value = usuario.nomeEmpresa;
                    document.getElementById("cpfRepresentante").value = sessionStorage.getItem("CPF_USUARIO");
                    document.getElementById("emailRepresentante").value = sessionStorage.getItem("EMAIL_USUARIO");
                    document.getElementById("cargoRepresentante").value = sessionStorage.getItem("CARGO_USUARIO");
                } else {
                    console.warn("Nenhum dado encontrado para o usuário.");
                }
            })
            .catch((erro) => {
                console.error("#ERRO: ", erro);
            });

            return false;
        }
    </script>

</body>

</html>